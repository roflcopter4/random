# Alternative GNU Make workspace makefile autogenerated by Premake

ifdef cf
  ifeq ($(cf),debug)
    config=debug
  endif
  ifeq ($(cf),release)
    config=release
  endif
endif

ifndef config
  config=debug
endif

ifndef verbose
  SILENT = @
endif

ifeq ($(config),debug)
  myStrLib_config = debug
  ggets_config = debug
endif
ifeq ($(config),release)
  myStrLib_config = release
  ggets_config = release
endif

PROJECTS := myStrLib ggets

.PHONY: all clean help $(PROJECTS) config debug

all: $(PROJECTS)

myStrLib:
ifneq (,$(myStrLib_config))
	@echo "==== Building myStrLib ($(myStrLib_config)) ===="
	@${MAKE} --no-print-directory -C . -f pmake/myStrLib.make config=$(myStrLib_config)
endif

ggets:
ifneq (,$(ggets_config))
	@echo "==== Building ggets ($(ggets_config)) ===="
	@${MAKE} --no-print-directory -C . -f pmake/ggets.make config=$(ggets_config)
endif

release:
	@$(MAKE) --no-print-directory config=release all

debug:
	@$(MAKE) --no-print-directory config=debug all

clean:
	@${MAKE} --no-print-directory -C . -f pmake/myStrLib.make clean
	@${MAKE} --no-print-directory -C . -f pmake/ggets.make clean
	@rm -rf obj Debug/obj Release/obj

nuke:
	@echo 'Wiping the whole lot'
	@rm -rf bin obj Debug Release

install:
	install -m755 bin/Debug/libggets.so /usr/local/lib/
	install -m755 bin/Debug/libmystr.so /usr/local/lib/
	install -m644 ggets.h /usr/local/include/
	install -m644 myStrLib.h /usr/local/include/

help:
	@echo "Usage: make [config=name] [target]"
	@echo ""
	@echo "CONFIGURATIONS:"
	@echo "  debug"
	@echo "  release"
	@echo ""
	@echo "TARGETS:"
	@echo "   all (default)"
	@echo "   clean"
	@echo "   myStrLib"
	@echo "   ggets"
	@echo ""
	@echo "For more information, see http://industriousone.com/premake/quick-start"
